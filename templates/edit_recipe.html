{% extends "base.html" %}
{% block content %}

    <h3 class="center-align">Edit Recipe</h3>

    <div class="row card-panel grey lighten-5">
        <!-- Add new recipe form -->
        <form action="{{ url_for('edit_recipe', recipe_id=recipe._id)}}" method="POST" class="col s12">

            <!-- Recipe Name Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-cookie-bite prefix teal-text text-lighten-3"></i>
                    <input value="{{recipe.recipe_name}}" name="recipe_name" minlength="8" maxlength="50" pattern="^[a-zA-Z0-9\s]{8,50}$" required id="recipe_name" type="text" class="validate">
                    <label for="recipe_name">Recipe Name</label>
                </div>
            </div>

            <!-- Image URL Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-image prefix teal-text text-lighten-3"></i>
                    <input value="{{recipe.photo_path}}" name="photo_path" minlength="5" maxlength="500" required id="photo_path" type="text" class="validate">
                    <label for="photo_path">Image URL</label>
                </div>
            </div>

            <!-- Recipe Prep Time Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-stopwatch prefix teal-text text-lighten-3"></i>
                    <input value="{{recipe.prep_time}}" name="prep_time" name="prep_time" minlength="1" maxlength="3" pattern="^[0-9]{1,3}$" required id="prep_time" type="text" class="validate">
                    <label for="prep_time">Prep Time</label>
                </div>
            </div>

            <!-- Recipe Cooking Time Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-clock prefix teal-text text-lighten-3"></i>
                    <input value="{{recipe.cook_time}}" name="cook_time" name="cook_time" minlength="1" maxlength="3" pattern="^[0-9]{1,3}$" required id="cook_time" type="text" class="validate">
                    <label for="cook_time">Cooking Time</label>
                </div>
            </div>

            <!-- Recipe Completion Time Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-regular fa-clock prefix teal-text text-lighten-3"></i>
                    <input value="{{recipe.completion_time}}" name="completion_time" name="completion_time" minlength="1" maxlength="3" pattern="^[0-9]{1,3}$" required id="completion_time" type="text" class="validate">
                    <label for="completion_time">Completion Time</label>
                </div>
            </div>

            <!-- Recipe Ingredients Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-list prefix teal-text text-lighten-3"></i>
                    <textarea id="ingredients" required name="ingredients" pattern="^[a-zA-Z0-9\s]{8,1000}" class="materialize-textarea">{{recipe.ingredients}}</textarea>
                    <label for="ingredients">Ingredients</label>
                </div>
            </div>

            <!-- Recipe Method Field -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-book prefix teal-text text-lighten-3"></i>
                    <textarea id="method" name="method" pattern="^[a-zA-Z0-9/s]{8,1000}" required class="materialize-textarea">{{recipe.method}}</textarea>
                    <label for="method">Method</label>
                </div>
            </div>

            <!-- Recipe Difficulty Level Selector -->
            <div class="input-field col s12">
                <select name="diff_level" id="diff_level" required>
                    <option value="" disabled>Choose your option</option>
                    {% for diff_level in diff_levels %}
                    {% if diff_level.diff_level == recipe.diff_level %}
                        <option selected value="{{diff_level.diff_level}}">{{diff_level.diff_level}}</option>
                    {% else %}
                        <option value="{{diff_level.diff_level}}">{{diff_level.diff_level}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
              <label for="diff_level">Difficulty Level</label>
            </div>

            <!-- Recipe Cooking Method Selector -->
            <div class="input-field col s12">
                <select name="cooking_method_name" id="cooking_method_name" required>
                    <option value="" disabled>Choose your option</option>
                    {% for cooking_method in cooking_methods %}
                    {% if cooking_method.cooking_method_name == recipe.cooking_method_name %}
                        <option selected value="{{cooking_method.cooking_method_name}}">{{cooking_method.cooking_method_name}}</option>
                    {% else %}
                        <option value="{{cooking_method.cooking_method_name}}">{{cooking_method.cooking_method_name}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
              <label for="cooking_method_name">Cooking Method</label>
            </div>

            <!-- Edit Recipe and Cancel Buttons -->
            <div class="col s12 row">
                <a href="{{url_for('get_recipes')}}" class="red btn-large"> Cancel <i class="fa-solid fa-ban"></i> </a>
                <button class="btn-large teal text-shadow" type="submit">
                  Update <i class="fa-solid fa-edit"></i>
                </button>
            </div>

        </form>
      </div>

{% endblock %}